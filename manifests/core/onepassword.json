{
  "manifest_version": "1.0.0",
  "id": "onepassword",
  "name": "1Password",
  "description": "1Password integration via Go helper binary for vault and item access.",
  "version": "0.1.0",
  "category": "security",
  "requires": {
    "credentials": [{
      "id": "onepassword_service_account",
      "provider": "onepassword",
      "kind": "service_account",
      "description": "1Password Service Account token"
    }]
  },
  "tools": [
    {
      "name": "op.status",
      "description": "Get 1Password integration status.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account": {"type": "string"}
        },
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "backend": {"type": "string"}
        }
      },
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.vaults.list",
      "description": "List all accessible vaults.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account": {"type": "string"}
        },
        "additionalProperties": false
      },
      "outputSchema": {"type": "object"},
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.items.list",
      "description": "List items in a vault.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account": {"type": "string"},
          "vault_id": {"type": "string", "description": "Vault ID. Falls back to default vault if not provided."},
          "vaultId": {"type": "string"}
        },
        "additionalProperties": false
      },
      "outputSchema": {"type": "object"},
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.items.get",
      "description": "Get a specific item from a vault.",
      "inputSchema": {
        "type": "object",
        "required": ["item_id"],
        "properties": {
          "account": {"type": "string"},
          "vault_id": {"type": "string"},
          "vaultId": {"type": "string"},
          "item_id": {"type": "string", "description": "Item ID or name."},
          "itemId": {"type": "string"}
        },
        "additionalProperties": false
      },
      "outputSchema": {"type": "object"},
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.secrets.resolve",
      "description": "Resolve a secret reference (e.g., 'op://vault/item/field').",
      "inputSchema": {
        "type": "object",
        "required": ["reference"],
        "properties": {
          "account": {"type": "string"},
          "reference": {"type": "string", "description": "Secret reference URI."}
        },
        "additionalProperties": false
      },
      "outputSchema": {"type": "object"},
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.config.defaultVault",
      "description": "Get the default vault ID from config.",
      "inputSchema": {
        "type": "object",
        "properties": {},
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "default_vault_id": {"type": ["string", "null"]}
        }
      },
      "annotations": {"readOnlyHint": true}
    },
    {
      "name": "op.config.setDefaultVault",
      "description": "Set the default vault ID in config.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "vault_id": {"type": "string"},
          "vaultId": {"type": "string"}
        },
        "additionalProperties": false
      },
      "outputSchema": {
        "type": "object",
        "required": ["success"],
        "properties": {
          "success": {"type": "boolean"},
          "default_vault_id": {"type": ["string", "null"]}
        }
      }
    }
  ],
  "implementation": {
    "type": "internal",
    "module": "proxy.handlers.onepassword",
    "methods": {
      "op.status": "op.status",
      "op.vaults.list": "op.vaults.list",
      "op.items.list": "op.items.list",
      "op.items.get": "op.items.get",
      "op.secrets.resolve": "op.secrets.resolve",
      "op.config.defaultVault": "op.config.defaultVault",
      "op.config.setDefaultVault": "op.config.setDefaultVault"
    }
  },
  "compatibility": {"mcpProtocol": "2025-03-26", "os": ["macos"]}
}
